<div class="warehouse-container">
  <!-- Header Section -->
  <div class="warehouse-header">
    <div class="header-title">
      <h1>ğŸ­ Quáº£n lÃ½ Kho</h1>
      <p>Quáº£n lÃ½ vÃ  giÃ¡m sÃ¡t cÃ¡c kho hÃ ng trong há»‡ thá»‘ng</p>
    </div>
    <div class="header-actions">
      <button class="btn btn-primary">
        <span class="icon">â•</span>
        ThÃªm Kho Má»›i
      </button>
    </div>
  </div>

  <!-- Stats Section -->
  <div class="stats-section" *ngIf="stats">
    <div class="stat-card">
      <div class="stat-icon">ğŸ­</div>
      <div class="stat-content">
        <div class="stat-value">{{ stats.totalWarehouses }}</div>
        <div class="stat-label">Tá»•ng sá»‘ kho</div>
      </div>
    </div>

    <div class="stat-card">
      <div class="stat-icon">âœ…</div>
      <div class="stat-content">
        <div class="stat-value">{{ stats.activeWarehouses }}</div>
        <div class="stat-label">Kho hoáº¡t Ä‘á»™ng</div>
      </div>
    </div>

    <div class="stat-card">
      <div class="stat-icon">ğŸ“¦</div>
      <div class="stat-content">
        <div class="stat-value">{{ stats.totalCapacity | number }}</div>
        <div class="stat-label">Tá»•ng sá»©c chá»©a (mÂ³)</div>
      </div>
    </div>

    <div class="stat-card">
      <div class="stat-icon">ğŸ“Š</div>
      <div class="stat-content">
        <div class="stat-value">{{ stats.utilizationRate }}%</div>
        <div class="stat-label">Tá»· lá»‡ sá»­ dá»¥ng</div>
      </div>
    </div>
  </div>

  <!-- Filters and Search Section -->
  <div class="filter-section">
    <div class="search-box">
      <span class="search-icon">ğŸ”</span>
      <input
        type="text"
        class="search-input"
        placeholder="TÃ¬m kiáº¿m theo tÃªn, mÃ£ kho hoáº·c thÃ nh phá»‘..."
        [(ngModel)]="searchTerm"
        (input)="onSearch()"
      />
    </div>

    <div class="filter-controls">
      <select class="filter-select" [(ngModel)]="selectedStatus" (change)="onStatusFilter()">
        <option value="ALL">Táº¥t cáº£ tráº¡ng thÃ¡i</option>
        <option value="ACTIVE">Hoáº¡t Ä‘á»™ng</option>
        <option value="INACTIVE">KhÃ´ng hoáº¡t Ä‘á»™ng</option>
        <option value="MAINTENANCE">Báº£o trÃ¬</option>
      </select>

      <button class="btn-view-toggle" (click)="toggleViewMode()">
        <span *ngIf="viewMode === 'grid'">ğŸ“‹</span>
        <span *ngIf="viewMode === 'list'">âŠ</span>
      </button>
    </div>
  </div>

  <!-- Loading State -->
  <div class="loading-spinner" *ngIf="loading">
    <div class="spinner"></div>
    <p>Äang táº£i dá»¯ liá»‡u...</p>
  </div>

  <!-- Warehouses Grid/List -->
  <div class="warehouses-content" *ngIf="!loading">
    <!-- Grid View -->
    <div class="warehouses-grid" *ngIf="viewMode === 'grid'">
      <div class="warehouse-card" *ngFor="let warehouse of filteredWarehouses" (click)="selectWarehouse(warehouse)">
        <div class="card-header">
          <div class="warehouse-code">{{ warehouse.code }}</div>
          <span class="status-badge" [ngClass]="getStatusClass(warehouse.status)">
            {{ getStatusText(warehouse.status) }}
          </span>
        </div>

        <div class="card-body">
          <h3 class="warehouse-name">{{ warehouse.name }}</h3>
          <div class="warehouse-info">
            <div class="info-item">
              <span class="info-icon">ğŸ“</span>
              <span>{{ warehouse.city }}</span>
            </div>
            <div class="info-item">
              <span class="info-icon">ğŸ‘¤</span>
              <span>{{ warehouse.manager }}</span>
            </div>
          </div>

          <div class="capacity-section">
            <div class="capacity-header">
              <span>Sá»©c chá»©a</span>
              <span class="capacity-value">{{ warehouse.currentOccupancy | number }} / {{ warehouse.capacity | number }} mÂ³</span>
            </div>
            <div class="capacity-bar">
              <div
                class="capacity-fill"
                [style.width.%]="getOccupancyPercentage(warehouse)"
                [ngClass]="getOccupancyClass(getOccupancyPercentage(warehouse))"
              ></div>
            </div>
            <div class="capacity-percentage">{{ getOccupancyPercentage(warehouse) }}% Ä‘Ã£ sá»­ dá»¥ng</div>
          </div>
        </div>

        <div class="card-footer">
          <div class="footer-info">
            <span class="footer-icon">ğŸ“</span>
            <span>{{ warehouse.phone }}</span>
          </div>
        </div>
      </div>
    </div>

    <!-- List View -->
    <div class="warehouses-list" *ngIf="viewMode === 'list'">
      <table class="warehouse-table">
        <thead>
          <tr>
            <th>MÃ£ kho</th>
            <th>TÃªn kho</th>
            <th>ThÃ nh phá»‘</th>
            <th>Quáº£n lÃ½</th>
            <th>Sá»©c chá»©a</th>
            <th>Sá»­ dá»¥ng</th>
            <th>Tráº¡ng thÃ¡i</th>
            <th>Thao tÃ¡c</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let warehouse of filteredWarehouses" (click)="selectWarehouse(warehouse)" class="table-row">
            <td class="warehouse-code-cell">{{ warehouse.code }}</td>
            <td class="warehouse-name-cell">{{ warehouse.name }}</td>
            <td>{{ warehouse.city }}</td>
            <td>{{ warehouse.manager }}</td>
            <td>{{ warehouse.capacity | number }} mÂ³</td>
            <td>
              <div class="table-capacity">
                <span>{{ getOccupancyPercentage(warehouse) }}%</span>
                <div class="mini-capacity-bar">
                  <div
                    class="mini-capacity-fill"
                    [style.width.%]="getOccupancyPercentage(warehouse)"
                    [ngClass]="getOccupancyClass(getOccupancyPercentage(warehouse))"
                  ></div>
                </div>
              </div>
            </td>
            <td>
              <span class="status-badge" [ngClass]="getStatusClass(warehouse.status)">
                {{ getStatusText(warehouse.status) }}
              </span>
            </td>
            <td>
              <button class="btn-action">Chi tiáº¿t</button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- No Results -->
    <div class="no-results" *ngIf="filteredWarehouses.length === 0">
      <div class="no-results-icon">ğŸ”</div>
      <p>KhÃ´ng tÃ¬m tháº¥y kho nÃ o phÃ¹ há»£p</p>
    </div>
  </div>

  <!-- Warehouse Detail Modal -->
  <div class="modal-overlay" *ngIf="selectedWarehouse" (click)="closeDetail()">
    <div class="modal-content" (click)="$event.stopPropagation()">
      <div class="modal-header">
        <h2>{{ selectedWarehouse.name }}</h2>
        <button class="btn-close" (click)="closeDetail()">âœ•</button>
      </div>

      <div class="modal-body">
        <div class="detail-section">
          <h3>ThÃ´ng tin cÆ¡ báº£n</h3>
          <div class="detail-grid">
            <div class="detail-item">
              <label>MÃ£ kho:</label>
              <span>{{ selectedWarehouse.code }}</span>
            </div>
            <div class="detail-item">
              <label>Tráº¡ng thÃ¡i:</label>
              <span class="status-badge" [ngClass]="getStatusClass(selectedWarehouse.status)">
                {{ getStatusText(selectedWarehouse.status) }}
              </span>
            </div>
            <div class="detail-item">
              <label>Äá»‹a chá»‰:</label>
              <span>{{ selectedWarehouse.address }}</span>
            </div>
            <div class="detail-item">
              <label>ThÃ nh phá»‘:</label>
              <span>{{ selectedWarehouse.city }}</span>
            </div>
            <div class="detail-item">
              <label>Quá»‘c gia:</label>
              <span>{{ selectedWarehouse.country }}</span>
            </div>
          </div>
        </div>

        <div class="detail-section">
          <h3>ThÃ´ng tin quáº£n lÃ½</h3>
          <div class="detail-grid">
            <div class="detail-item">
              <label>Quáº£n lÃ½:</label>
              <span>{{ selectedWarehouse.manager }}</span>
            </div>
            <div class="detail-item">
              <label>Äiá»‡n thoáº¡i:</label>
              <span>{{ selectedWarehouse.phone }}</span>
            </div>
            <div class="detail-item">
              <label>Email:</label>
              <span>{{ selectedWarehouse.email }}</span>
            </div>
          </div>
        </div>

        <div class="detail-section">
          <h3>Sá»©c chá»©a & Sá»­ dá»¥ng</h3>
          <div class="detail-capacity">
            <div class="capacity-stats">
              <div class="capacity-stat">
                <label>Tá»•ng sá»©c chá»©a:</label>
                <span class="stat-value-large">{{ selectedWarehouse.capacity | number }} mÂ³</span>
              </div>
              <div class="capacity-stat">
                <label>ÄÃ£ sá»­ dá»¥ng:</label>
                <span class="stat-value-large">{{ selectedWarehouse.currentOccupancy | number }} mÂ³</span>
              </div>
              <div class="capacity-stat">
                <label>CÃ²n trá»‘ng:</label>
                <span class="stat-value-large">{{ selectedWarehouse.capacity - selectedWarehouse.currentOccupancy | number }} mÂ³</span>
              </div>
            </div>
            <div class="capacity-bar-large">
              <div
                class="capacity-fill"
                [style.width.%]="getOccupancyPercentage(selectedWarehouse)"
                [ngClass]="getOccupancyClass(getOccupancyPercentage(selectedWarehouse))"
              ></div>
            </div>
            <div class="capacity-percentage-large">
              {{ getOccupancyPercentage(selectedWarehouse) }}% Ä‘Ã£ sá»­ dá»¥ng
            </div>
          </div>
        </div>

        <div class="detail-section">
          <h3>ThÃ´ng tin khÃ¡c</h3>
          <div class="detail-grid">
            <div class="detail-item">
              <label>NgÃ y táº¡o:</label>
              <span>{{ selectedWarehouse.createdDate | date: 'dd/MM/yyyy' }}</span>
            </div>
            <div class="detail-item">
              <label>Cáº­p nháº­t láº§n cuá»‘i:</label>
              <span>{{ selectedWarehouse.lastUpdated | date: 'dd/MM/yyyy HH:mm' }}</span>
            </div>
          </div>
        </div>
      </div>

      <div class="modal-footer">
        <button class="btn btn-secondary" (click)="closeDetail()">ÄÃ³ng</button>
        <button class="btn btn-warning">Chá»‰nh sá»­a</button>
      </div>
    </div>
  </div>
</div>
